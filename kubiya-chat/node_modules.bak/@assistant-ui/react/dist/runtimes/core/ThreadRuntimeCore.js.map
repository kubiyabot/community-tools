{"version":3,"sources":["../../../src/runtimes/core/ThreadRuntimeCore.tsx"],"sourcesContent":["import { AppendMessage, ModelConfig, ThreadMessage } from \"../../types\";\nimport { RunConfig } from \"../../types/AssistantTypes\";\nimport type { Unsubscribe } from \"../../types/Unsubscribe\";\nimport { SpeechSynthesisAdapter } from \"../speech/SpeechAdapterTypes\";\nimport { ExportedMessageRepository } from \"../utils/MessageRepository\";\nimport {\n  ComposerRuntimeCore,\n  ThreadComposerRuntimeCore,\n} from \"./ComposerRuntimeCore\";\n\nexport type RuntimeCapabilities = {\n  readonly switchToBranch: boolean;\n  readonly edit: boolean;\n  readonly reload: boolean;\n  readonly cancel: boolean;\n  readonly unstable_copy: boolean;\n  readonly speech: boolean;\n  readonly attachments: boolean;\n  readonly feedback: boolean;\n};\n\nexport type AddToolResultOptions = {\n  messageId: string;\n  toolName: string;\n  toolCallId: string;\n  result: any;\n};\n\nexport type SubmitFeedbackOptions = {\n  messageId: string;\n  type: \"negative\" | \"positive\";\n};\n\nexport type ThreadSuggestion = {\n  prompt: string;\n};\n\nexport type SpeechState = {\n  readonly messageId: string;\n  readonly status: SpeechSynthesisAdapter.Status;\n};\n\nexport type SubmittedFeedback = {\n  readonly type: \"negative\" | \"positive\";\n};\n\nexport type ThreadRuntimeEventType =\n  | \"run-start\"\n  | \"initialize\"\n  | \"model-config-update\";\n\nexport type StartRunConfig = {\n  parentId: string | null;\n  sourceId: string | null;\n  runConfig: RunConfig;\n};\n\nexport type ThreadRuntimeCore = Readonly<{\n  getMessageById: (messageId: string) =>\n    | {\n        parentId: string | null;\n        message: ThreadMessage;\n      }\n    | undefined;\n\n  getBranches: (messageId: string) => readonly string[];\n  switchToBranch: (branchId: string) => void;\n\n  append: (message: AppendMessage) => void;\n  startRun: (config: StartRunConfig) => void;\n  cancelRun: () => void;\n\n  addToolResult: (options: AddToolResultOptions) => void;\n\n  speak: (messageId: string) => void;\n  stopSpeaking: () => void;\n\n  getSubmittedFeedback: (messageId: string) => SubmittedFeedback | undefined;\n  submitFeedback: (feedback: SubmitFeedbackOptions) => void;\n\n  getModelConfig: () => ModelConfig;\n\n  composer: ThreadComposerRuntimeCore;\n  getEditComposer: (messageId: string) => ComposerRuntimeCore | undefined;\n  beginEdit: (messageId: string) => void;\n\n  speech: SpeechState | undefined;\n\n  capabilities: Readonly<RuntimeCapabilities>;\n  isDisabled: boolean;\n  messages: readonly ThreadMessage[];\n  suggestions: readonly ThreadSuggestion[];\n\n  // TODO deprecate for a more elegant solution\n  // /**\n  //  * @deprecated This field is deprecated and will be removed in 0.8.0.\n  //  * Please migrate to using `AssistantRuntimeCore.Provider` instead.\n  //  */\n  extras: unknown;\n\n  subscribe: (callback: () => void) => Unsubscribe;\n\n  import(repository: ExportedMessageRepository): void;\n  export(): ExportedMessageRepository;\n\n  unstable_on(event: ThreadRuntimeEventType, callback: () => void): Unsubscribe;\n}>;\n"],"mappings":";;;;;;;;;;;;;;;;AAAA;AAAA;","names":[]}