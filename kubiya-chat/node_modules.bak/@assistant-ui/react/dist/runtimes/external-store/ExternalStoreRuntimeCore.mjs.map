{"version":3,"sources":["../../../src/runtimes/external-store/ExternalStoreRuntimeCore.tsx"],"sourcesContent":["import { BaseAssistantRuntimeCore } from \"../../internal\";\nimport { ExternalStoreThreadListRuntimeCore } from \"./ExternalStoreThreadListRuntimeCore\";\nimport { ExternalStoreAdapter } from \"./ExternalStoreAdapter\";\nimport { ExternalStoreThreadRuntimeCore } from \"./ExternalStoreThreadRuntimeCore\";\n\nconst getThreadListAdapter = (store: ExternalStoreAdapter<any>) => {\n  return {\n    ...store.adapters?.threadList,\n  };\n};\n\nexport class ExternalStoreRuntimeCore extends BaseAssistantRuntimeCore {\n  public readonly threadList;\n\n  constructor(adapter: ExternalStoreAdapter<any>) {\n    super();\n    this.threadList = new ExternalStoreThreadListRuntimeCore(\n      getThreadListAdapter(adapter),\n      () =>\n        new ExternalStoreThreadRuntimeCore(this._proxyConfigProvider, adapter),\n    );\n  }\n\n  public setAdapter(adapter: ExternalStoreAdapter<any>) {\n    // Update the thread list adapter and propagate store changes to the main thread\n    this.threadList.__internal_setAdapter(getThreadListAdapter(adapter));\n    this.threadList.getMainThreadRuntimeCore().__internal_setAdapter(adapter);\n  }\n}\n"],"mappings":";AAAA,SAAS,gCAAgC;AACzC,SAAS,0CAA0C;AAEnD,SAAS,sCAAsC;AAE/C,IAAM,uBAAuB,CAAC,UAAqC;AACjE,SAAO;AAAA,IACL,GAAG,MAAM,UAAU;AAAA,EACrB;AACF;AAEO,IAAM,2BAAN,cAAuC,yBAAyB;AAAA,EACrD;AAAA,EAEhB,YAAY,SAAoC;AAC9C,UAAM;AACN,SAAK,aAAa,IAAI;AAAA,MACpB,qBAAqB,OAAO;AAAA,MAC5B,MACE,IAAI,+BAA+B,KAAK,sBAAsB,OAAO;AAAA,IACzE;AAAA,EACF;AAAA,EAEO,WAAW,SAAoC;AAEpD,SAAK,WAAW,sBAAsB,qBAAqB,OAAO,CAAC;AACnE,SAAK,WAAW,yBAAyB,EAAE,sBAAsB,OAAO;AAAA,EAC1E;AACF;","names":[]}