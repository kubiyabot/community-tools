{"version":3,"sources":["../../../src/runtimes/edge/EdgeRuntimeRequestOptions.ts"],"sourcesContent":["import { JSONSchema7 } from \"json-schema\";\nimport {\n  LanguageModelConfigSchema,\n  LanguageModelV1CallSettingsSchema,\n} from \"../../types/ModelConfigTypes\";\nimport { z } from \"zod\";\n\nconst LanguageModelV1FunctionToolSchema = z.object({\n  type: z.literal(\"function\"),\n  name: z.string(),\n  description: z.string().optional(),\n  parameters: z.custom<JSONSchema7>(\n    (val) => typeof val === \"object\" && val !== null,\n  ),\n});\n\nconst TextContentPartSchema = z.object({\n  type: z.literal(\"text\"),\n  text: z.string(),\n});\n\nconst ImageContentPartSchema = z.object({\n  type: z.literal(\"image\"),\n  image: z.string(),\n});\n\nconst FileContentPartSchema = z.object({\n  type: z.literal(\"file\"),\n  data: z.string(),\n  mimeType: z.string(),\n});\n\nconst Unstable_AudioContentPart = z.object({\n  type: z.literal(\"audio\"),\n  audio: z.object({\n    data: z.string(),\n    format: z.union([z.literal(\"mp3\"), z.literal(\"wav\")]),\n  }),\n});\n\nconst CoreToolCallContentPartSchema = z.object({\n  type: z.literal(\"tool-call\"),\n  toolCallId: z.string(),\n  toolName: z.string(),\n  args: z.record(z.unknown()),\n  result: z.unknown().optional(),\n  isError: z.boolean().optional(),\n});\n// args is required but unknown;\n\nconst CoreUserMessageSchema = z.object({\n  role: z.literal(\"user\"),\n  content: z\n    .array(\n      z.discriminatedUnion(\"type\", [\n        TextContentPartSchema,\n        ImageContentPartSchema,\n        FileContentPartSchema,\n        Unstable_AudioContentPart,\n      ]),\n    )\n    .min(1)\n    .readonly(),\n});\n\nconst CoreAssistantMessageSchema = z.object({\n  role: z.literal(\"assistant\"),\n  content: z\n    .array(\n      z.discriminatedUnion(\"type\", [\n        TextContentPartSchema,\n        CoreToolCallContentPartSchema,\n      ]),\n    )\n    .min(1)\n    .readonly(),\n});\n\nconst CoreSystemMessageSchema = z.object({\n  role: z.literal(\"system\"),\n  content: z.tuple([TextContentPartSchema]).readonly(),\n});\n\nconst CoreMessageSchema = z.discriminatedUnion(\"role\", [\n  CoreSystemMessageSchema,\n  CoreUserMessageSchema,\n  CoreAssistantMessageSchema,\n]);\n\nexport const EdgeRuntimeRequestOptionsSchema = z\n  .object({\n    system: z.string().optional(),\n    messages: z.array(CoreMessageSchema).min(1).readonly(),\n    runConfig: z\n      .object({\n        custom: z.record(z.unknown()).optional(),\n      })\n      .optional(),\n    tools: z.array(LanguageModelV1FunctionToolSchema).readonly().optional(),\n    unstable_assistantMessageId: z.string().optional(),\n  })\n  .merge(LanguageModelV1CallSettingsSchema)\n  .merge(LanguageModelConfigSchema);\n\nexport type EdgeRuntimeRequestOptions = z.infer<\n  typeof EdgeRuntimeRequestOptionsSchema\n>;\n"],"mappings":";AACA;AAAA,EACE;AAAA,EACA;AAAA,OACK;AACP,SAAS,SAAS;AAElB,IAAM,oCAAoC,EAAE,OAAO;AAAA,EACjD,MAAM,EAAE,QAAQ,UAAU;AAAA,EAC1B,MAAM,EAAE,OAAO;AAAA,EACf,aAAa,EAAE,OAAO,EAAE,SAAS;AAAA,EACjC,YAAY,EAAE;AAAA,IACZ,CAAC,QAAQ,OAAO,QAAQ,YAAY,QAAQ;AAAA,EAC9C;AACF,CAAC;AAED,IAAM,wBAAwB,EAAE,OAAO;AAAA,EACrC,MAAM,EAAE,QAAQ,MAAM;AAAA,EACtB,MAAM,EAAE,OAAO;AACjB,CAAC;AAED,IAAM,yBAAyB,EAAE,OAAO;AAAA,EACtC,MAAM,EAAE,QAAQ,OAAO;AAAA,EACvB,OAAO,EAAE,OAAO;AAClB,CAAC;AAED,IAAM,wBAAwB,EAAE,OAAO;AAAA,EACrC,MAAM,EAAE,QAAQ,MAAM;AAAA,EACtB,MAAM,EAAE,OAAO;AAAA,EACf,UAAU,EAAE,OAAO;AACrB,CAAC;AAED,IAAM,4BAA4B,EAAE,OAAO;AAAA,EACzC,MAAM,EAAE,QAAQ,OAAO;AAAA,EACvB,OAAO,EAAE,OAAO;AAAA,IACd,MAAM,EAAE,OAAO;AAAA,IACf,QAAQ,EAAE,MAAM,CAAC,EAAE,QAAQ,KAAK,GAAG,EAAE,QAAQ,KAAK,CAAC,CAAC;AAAA,EACtD,CAAC;AACH,CAAC;AAED,IAAM,gCAAgC,EAAE,OAAO;AAAA,EAC7C,MAAM,EAAE,QAAQ,WAAW;AAAA,EAC3B,YAAY,EAAE,OAAO;AAAA,EACrB,UAAU,EAAE,OAAO;AAAA,EACnB,MAAM,EAAE,OAAO,EAAE,QAAQ,CAAC;AAAA,EAC1B,QAAQ,EAAE,QAAQ,EAAE,SAAS;AAAA,EAC7B,SAAS,EAAE,QAAQ,EAAE,SAAS;AAChC,CAAC;AAGD,IAAM,wBAAwB,EAAE,OAAO;AAAA,EACrC,MAAM,EAAE,QAAQ,MAAM;AAAA,EACtB,SAAS,EACN;AAAA,IACC,EAAE,mBAAmB,QAAQ;AAAA,MAC3B;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,IACF,CAAC;AAAA,EACH,EACC,IAAI,CAAC,EACL,SAAS;AACd,CAAC;AAED,IAAM,6BAA6B,EAAE,OAAO;AAAA,EAC1C,MAAM,EAAE,QAAQ,WAAW;AAAA,EAC3B,SAAS,EACN;AAAA,IACC,EAAE,mBAAmB,QAAQ;AAAA,MAC3B;AAAA,MACA;AAAA,IACF,CAAC;AAAA,EACH,EACC,IAAI,CAAC,EACL,SAAS;AACd,CAAC;AAED,IAAM,0BAA0B,EAAE,OAAO;AAAA,EACvC,MAAM,EAAE,QAAQ,QAAQ;AAAA,EACxB,SAAS,EAAE,MAAM,CAAC,qBAAqB,CAAC,EAAE,SAAS;AACrD,CAAC;AAED,IAAM,oBAAoB,EAAE,mBAAmB,QAAQ;AAAA,EACrD;AAAA,EACA;AAAA,EACA;AACF,CAAC;AAEM,IAAM,kCAAkC,EAC5C,OAAO;AAAA,EACN,QAAQ,EAAE,OAAO,EAAE,SAAS;AAAA,EAC5B,UAAU,EAAE,MAAM,iBAAiB,EAAE,IAAI,CAAC,EAAE,SAAS;AAAA,EACrD,WAAW,EACR,OAAO;AAAA,IACN,QAAQ,EAAE,OAAO,EAAE,QAAQ,CAAC,EAAE,SAAS;AAAA,EACzC,CAAC,EACA,SAAS;AAAA,EACZ,OAAO,EAAE,MAAM,iCAAiC,EAAE,SAAS,EAAE,SAAS;AAAA,EACtE,6BAA6B,EAAE,OAAO,EAAE,SAAS;AACnD,CAAC,EACA,MAAM,iCAAiC,EACvC,MAAM,yBAAyB;","names":[]}