{"version":3,"sources":["../../../../src/runtimes/edge/converters/fromCoreMessage.ts"],"sourcesContent":["import { generateId } from \"../../../internal\";\nimport {\n  ThreadMessage,\n  CoreMessage,\n  ToolCallContentPart,\n  MessageStatus,\n  CompleteAttachment,\n} from \"../../../types\";\n\nexport const fromCoreMessages = (\n  message: readonly CoreMessage[],\n): ThreadMessage[] => {\n  return message.map((message) => fromCoreMessage(message));\n};\n\nexport const fromCoreMessage = (\n  message: CoreMessage,\n  {\n    id = generateId(),\n    status = { type: \"complete\", reason: \"unknown\" } as MessageStatus,\n    attachments = [] as readonly CompleteAttachment[],\n  } = {},\n): ThreadMessage => {\n  const commonProps = {\n    id,\n    createdAt: new Date(),\n  };\n\n  const role = message.role;\n  switch (role) {\n    case \"assistant\":\n      return {\n        ...commonProps,\n        role,\n        content: message.content.map((part) => {\n          if (part.type === \"tool-call\") {\n            return {\n              ...part,\n              argsText: JSON.stringify(part.args),\n            } satisfies ToolCallContentPart;\n          }\n          return part;\n        }),\n        status,\n\n        metadata: { unstable_data: [], steps: [], custom: {} },\n      } satisfies ThreadMessage;\n\n    case \"user\":\n      return {\n        ...commonProps,\n        role,\n        content: message.content,\n        attachments,\n        metadata: { custom: {} },\n      } satisfies ThreadMessage;\n\n    case \"system\":\n      return {\n        ...commonProps,\n        role,\n        content: message.content,\n        metadata: { custom: {} },\n      } satisfies ThreadMessage;\n\n    default: {\n      const unsupportedRole: never = role;\n      throw new Error(`Unknown message role: ${unsupportedRole}`);\n    }\n  }\n};\n"],"mappings":";;;;;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBAA2B;AASpB,IAAM,mBAAmB,CAC9B,YACoB;AACpB,SAAO,QAAQ,IAAI,CAACA,aAAY,gBAAgBA,QAAO,CAAC;AAC1D;AAEO,IAAM,kBAAkB,CAC7B,SACA;AAAA,EACE,SAAK,4BAAW;AAAA,EAChB,SAAS,EAAE,MAAM,YAAY,QAAQ,UAAU;AAAA,EAC/C,cAAc,CAAC;AACjB,IAAI,CAAC,MACa;AAClB,QAAM,cAAc;AAAA,IAClB;AAAA,IACA,WAAW,oBAAI,KAAK;AAAA,EACtB;AAEA,QAAM,OAAO,QAAQ;AACrB,UAAQ,MAAM;AAAA,IACZ,KAAK;AACH,aAAO;AAAA,QACL,GAAG;AAAA,QACH;AAAA,QACA,SAAS,QAAQ,QAAQ,IAAI,CAAC,SAAS;AACrC,cAAI,KAAK,SAAS,aAAa;AAC7B,mBAAO;AAAA,cACL,GAAG;AAAA,cACH,UAAU,KAAK,UAAU,KAAK,IAAI;AAAA,YACpC;AAAA,UACF;AACA,iBAAO;AAAA,QACT,CAAC;AAAA,QACD;AAAA,QAEA,UAAU,EAAE,eAAe,CAAC,GAAG,OAAO,CAAC,GAAG,QAAQ,CAAC,EAAE;AAAA,MACvD;AAAA,IAEF,KAAK;AACH,aAAO;AAAA,QACL,GAAG;AAAA,QACH;AAAA,QACA,SAAS,QAAQ;AAAA,QACjB;AAAA,QACA,UAAU,EAAE,QAAQ,CAAC,EAAE;AAAA,MACzB;AAAA,IAEF,KAAK;AACH,aAAO;AAAA,QACL,GAAG;AAAA,QACH;AAAA,QACA,SAAS,QAAQ;AAAA,QACjB,UAAU,EAAE,QAAQ,CAAC,EAAE;AAAA,MACzB;AAAA,IAEF,SAAS;AACP,YAAM,kBAAyB;AAC/B,YAAM,IAAI,MAAM,yBAAyB,eAAe,EAAE;AAAA,IAC5D;AAAA,EACF;AACF;","names":["message"]}