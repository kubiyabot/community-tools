{"version":3,"sources":["../../../src/context/providers/ContentPartRuntimeProvider.tsx"],"sourcesContent":["\"use client\";\n\nimport { type FC, type PropsWithChildren, useEffect, useState } from \"react\";\nimport { create } from \"zustand\";\nimport { ContentPartContext } from \"../react/ContentPartContext\";\nimport type { ContentPartContextValue } from \"../react/ContentPartContext\";\nimport { writableStore } from \"../ReadonlyStore\";\nimport { ContentPartRuntime } from \"../../api/ContentPartRuntime\";\n\nexport namespace ContentPartRuntimeProvider {\n  export type Props = PropsWithChildren<{\n    runtime: ContentPartRuntime;\n  }>;\n}\n\nconst useContentPartRuntimeStore = (runtime: ContentPartRuntime) => {\n  const [store] = useState(() => create(() => runtime));\n\n  useEffect(() => {\n    writableStore(store).setState(runtime, true);\n  }, [runtime, store]);\n\n  return store;\n};\n\nexport const useContentPartStore = (runtime: ContentPartRuntime) => {\n  const [store] = useState(() => create(() => runtime.getState()));\n  useEffect(() => {\n    const updateState = () =>\n      writableStore(store).setState(runtime.getState(), true);\n    updateState();\n    return runtime.subscribe(updateState);\n  }, [runtime, store]);\n\n  return store;\n};\n\nexport const ContentPartRuntimeProvider: FC<\n  ContentPartRuntimeProvider.Props\n> = ({ runtime, children }) => {\n  const useContentPartRuntime = useContentPartRuntimeStore(runtime);\n  const useContentPart = useContentPartStore(runtime);\n  const [context] = useState<ContentPartContextValue>(() => {\n    return { useContentPartRuntime, useContentPart };\n  });\n\n  return (\n    <ContentPartContext.Provider value={context}>\n      {children}\n    </ContentPartContext.Provider>\n  );\n};\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA,mBAAqE;AACrE,qBAAuB;AACvB,gCAAmC;AAEnC,2BAA8B;AAyC1B;AAhCJ,IAAM,6BAA6B,CAAC,YAAgC;AAClE,QAAM,CAAC,KAAK,QAAI,uBAAS,UAAM,uBAAO,MAAM,OAAO,CAAC;AAEpD,8BAAU,MAAM;AACd,4CAAc,KAAK,EAAE,SAAS,SAAS,IAAI;AAAA,EAC7C,GAAG,CAAC,SAAS,KAAK,CAAC;AAEnB,SAAO;AACT;AAEO,IAAM,sBAAsB,CAAC,YAAgC;AAClE,QAAM,CAAC,KAAK,QAAI,uBAAS,UAAM,uBAAO,MAAM,QAAQ,SAAS,CAAC,CAAC;AAC/D,8BAAU,MAAM;AACd,UAAM,cAAc,UAClB,oCAAc,KAAK,EAAE,SAAS,QAAQ,SAAS,GAAG,IAAI;AACxD,gBAAY;AACZ,WAAO,QAAQ,UAAU,WAAW;AAAA,EACtC,GAAG,CAAC,SAAS,KAAK,CAAC;AAEnB,SAAO;AACT;AAEO,IAAM,6BAET,CAAC,EAAE,SAAS,SAAS,MAAM;AAC7B,QAAM,wBAAwB,2BAA2B,OAAO;AAChE,QAAM,iBAAiB,oBAAoB,OAAO;AAClD,QAAM,CAAC,OAAO,QAAI,uBAAkC,MAAM;AACxD,WAAO,EAAE,uBAAuB,eAAe;AAAA,EACjD,CAAC;AAED,SACE,4CAAC,6CAAmB,UAAnB,EAA4B,OAAO,SACjC,UACH;AAEJ;","names":[]}