{"version":3,"sources":["../../../src/context/react/ComposerContext.ts"],"sourcesContent":["\"use client\";\n\nimport { useMemo } from \"react\";\nimport { useMessageContext, useMessageRuntime } from \"./MessageContext\";\nimport { useThreadContext, useThreadRuntime } from \"./ThreadContext\";\nimport { ReadonlyStore } from \"../ReadonlyStore\";\nimport { createContextStoreHook } from \"./utils/createContextStoreHook\";\nimport { ComposerRuntime, ComposerState } from \"../../api/ComposerRuntime\";\nimport { UseBoundStore } from \"zustand\";\n\nexport type ComposerContextValue = {\n  useComposer: UseBoundStore<ReadonlyStore<ComposerState>>;\n  type: \"edit\" | \"new\";\n};\n\nexport const useComposerContext = (): ComposerContextValue => {\n  const { useComposer: useThreadComposer } = useThreadContext();\n  const { useEditComposer } = useMessageContext({ optional: true }) ?? {};\n  return useMemo(\n    () => ({\n      useComposer: useEditComposer ?? useThreadComposer,\n      type: useEditComposer ? (\"edit\" as const) : (\"new\" as const),\n    }),\n    [useEditComposer, useThreadComposer],\n  );\n};\n\nexport const { useComposer } = createContextStoreHook(\n  useComposerContext,\n  \"useComposer\",\n);\n\nexport function useComposerRuntime(options?: {\n  optional?: false | undefined;\n}): ComposerRuntime;\nexport function useComposerRuntime(options?: {\n  optional?: boolean | undefined;\n}): ComposerRuntime | null;\nexport function useComposerRuntime(options?: {\n  optional?: boolean | undefined;\n}): ComposerRuntime | null {\n  const messageRuntime = useMessageRuntime({ optional: true });\n  const threadRuntime = useThreadRuntime(options);\n  return messageRuntime\n    ? messageRuntime.composer\n    : (threadRuntime?.composer ?? null);\n}\n"],"mappings":";;;AAEA,SAAS,eAAe;AACxB,SAAS,mBAAmB,yBAAyB;AACrD,SAAS,kBAAkB,wBAAwB;AAEnD,SAAS,8BAA8B;AAShC,IAAM,qBAAqB,MAA4B;AAC5D,QAAM,EAAE,aAAa,kBAAkB,IAAI,iBAAiB;AAC5D,QAAM,EAAE,gBAAgB,IAAI,kBAAkB,EAAE,UAAU,KAAK,CAAC,KAAK,CAAC;AACtE,SAAO;AAAA,IACL,OAAO;AAAA,MACL,aAAa,mBAAmB;AAAA,MAChC,MAAM,kBAAmB,SAAoB;AAAA,IAC/C;AAAA,IACA,CAAC,iBAAiB,iBAAiB;AAAA,EACrC;AACF;AAEO,IAAM,EAAE,YAAY,IAAI;AAAA,EAC7B;AAAA,EACA;AACF;AAQO,SAAS,mBAAmB,SAER;AACzB,QAAM,iBAAiB,kBAAkB,EAAE,UAAU,KAAK,CAAC;AAC3D,QAAM,gBAAgB,iBAAiB,OAAO;AAC9C,SAAO,iBACH,eAAe,WACd,eAAe,YAAY;AAClC;","names":[]}