{"version":3,"sources":["../../../src/context/react/AttachmentContext.ts"],"sourcesContent":["\"use client\";\n\nimport { createContext, useContext } from \"react\";\nimport { ReadonlyStore } from \"../ReadonlyStore\";\nimport { createContextStoreHook } from \"./utils/createContextStoreHook\";\nimport {\n  AttachmentRuntime,\n  AttachmentState,\n} from \"../../api/AttachmentRuntime\";\nimport { UseBoundStore } from \"zustand\";\n\nexport type AttachmentContextValue = {\n  source: \"thread-composer\" | \"edit-composer\" | \"message\";\n  useAttachment: UseBoundStore<ReadonlyStore<AttachmentState>>;\n  useAttachmentRuntime: UseBoundStore<ReadonlyStore<AttachmentRuntime>>;\n};\n\ntype ThreadComposerAttachmentContextValue = {\n  source: \"thread-composer\";\n  useAttachment: UseBoundStore<\n    ReadonlyStore<AttachmentState & { source: \"thread-composer\" }>\n  >;\n  useAttachmentRuntime: UseBoundStore<\n    ReadonlyStore<AttachmentRuntime & { type: \"thread-composer\" }>\n  >;\n};\ntype EditComposerAttachmentContextValue = {\n  source: \"edit-composer\";\n  useAttachment: UseBoundStore<\n    ReadonlyStore<AttachmentState & { source: \"edit-composer\" }>\n  >;\n  useAttachmentRuntime: UseBoundStore<\n    ReadonlyStore<AttachmentRuntime & { type: \"edit-composer\" }>\n  >;\n};\n\ntype MessageAttachmentContextValue = {\n  source: \"message\";\n  useAttachment: UseBoundStore<\n    ReadonlyStore<AttachmentState & { source: \"message\" }>\n  >;\n  useAttachmentRuntime: UseBoundStore<\n    ReadonlyStore<AttachmentRuntime & { type: \"message\" }>\n  >;\n};\n\nexport const AttachmentContext = createContext<AttachmentContextValue | null>(\n  null,\n);\n\nexport function useAttachmentContext(options?: {\n  optional?: false | undefined;\n}): AttachmentContextValue;\nexport function useAttachmentContext(options?: {\n  optional?: boolean | undefined;\n}): AttachmentContextValue | null;\nexport function useAttachmentContext(options?: {\n  optional?: boolean | undefined;\n}) {\n  const context = useContext(AttachmentContext);\n  if (!options?.optional && !context)\n    throw new Error(\n      \"This component must be used within a ComposerPrimitive.Attachments or MessagePrimitive.Attachments component.\",\n    );\n\n  return context;\n}\n\nfunction useThreadComposerAttachmentContext(options?: {\n  optional?: false | undefined;\n}): ThreadComposerAttachmentContextValue;\nfunction useThreadComposerAttachmentContext(options?: {\n  optional?: boolean | undefined;\n}): ThreadComposerAttachmentContextValue | null;\nfunction useThreadComposerAttachmentContext(options?: {\n  optional?: boolean | undefined;\n}): ThreadComposerAttachmentContextValue | null {\n  const context = useAttachmentContext(options);\n  if (!context) return null;\n  if (context.source !== \"thread-composer\")\n    throw new Error(\n      \"This component must be used within a thread's ComposerPrimitive.Attachments component.\",\n    );\n  return context as ThreadComposerAttachmentContextValue;\n}\n\nfunction useEditComposerAttachmentContext(options?: {\n  optional?: false | undefined;\n}): EditComposerAttachmentContextValue;\nfunction useEditComposerAttachmentContext(options?: {\n  optional?: boolean | undefined;\n}): EditComposerAttachmentContextValue | null;\nfunction useEditComposerAttachmentContext(options?: {\n  optional?: boolean | undefined;\n}): EditComposerAttachmentContextValue | null {\n  const context = useAttachmentContext(options);\n  if (!context) return null;\n  if (context.source !== \"edit-composer\")\n    throw new Error(\n      \"This component must be used within a messages's ComposerPrimitive.Attachments component.\",\n    );\n  return context as EditComposerAttachmentContextValue;\n}\n\nfunction useMessageAttachmentContext(options?: {\n  optional?: false | undefined;\n}): MessageAttachmentContextValue;\nfunction useMessageAttachmentContext(options?: {\n  optional?: boolean | undefined;\n}): MessageAttachmentContextValue | null;\nfunction useMessageAttachmentContext(options?: {\n  optional?: boolean | undefined;\n}): MessageAttachmentContextValue | null {\n  const context = useAttachmentContext(options);\n  if (!context) return null;\n  if (context.source !== \"message\")\n    throw new Error(\n      \"This component must be used within a MessagePrimitive.Attachments component.\",\n    );\n  return context as MessageAttachmentContextValue;\n}\n\nexport function useAttachmentRuntime(options?: {\n  optional?: false | undefined;\n}): AttachmentRuntime;\nexport function useAttachmentRuntime(options?: {\n  optional?: boolean | undefined;\n}): AttachmentRuntime | null;\nexport function useAttachmentRuntime(options?: {\n  optional?: boolean | undefined;\n}): AttachmentRuntime | null {\n  const attachmentRuntime = useAttachmentContext(options);\n  if (!attachmentRuntime) return null;\n  return attachmentRuntime.useAttachmentRuntime();\n}\n\nexport function useThreadComposerAttachmentRuntime(options?: {\n  optional?: false | undefined;\n}): AttachmentRuntime;\nexport function useThreadComposerAttachmentRuntime(options?: {\n  optional?: boolean | undefined;\n}): AttachmentRuntime | null;\nexport function useThreadComposerAttachmentRuntime(options?: {\n  optional?: boolean | undefined;\n}): AttachmentRuntime | null {\n  const attachmentRuntime = useThreadComposerAttachmentContext(options);\n  if (!attachmentRuntime) return null;\n  return attachmentRuntime.useAttachmentRuntime();\n}\n\nexport function useEditComposerAttachmentRuntime(options?: {\n  optional?: false | undefined;\n}): AttachmentRuntime;\nexport function useEditComposerAttachmentRuntime(options?: {\n  optional?: boolean | undefined;\n}): AttachmentRuntime | null;\nexport function useEditComposerAttachmentRuntime(options?: {\n  optional?: boolean | undefined;\n}): AttachmentRuntime | null {\n  const attachmentRuntime = useEditComposerAttachmentContext(options);\n  if (!attachmentRuntime) return null;\n  return attachmentRuntime.useAttachmentRuntime();\n}\n\nexport function useMessageAttachmentRuntime(options?: {\n  optional?: false | undefined;\n}): AttachmentRuntime;\nexport function useMessageAttachmentRuntime(options?: {\n  optional?: boolean | undefined;\n}): AttachmentRuntime | null;\nexport function useMessageAttachmentRuntime(options?: {\n  optional?: boolean | undefined;\n}): AttachmentRuntime | null {\n  const attachmentRuntime = useMessageAttachmentContext(options);\n  if (!attachmentRuntime) return null;\n  return attachmentRuntime.useAttachmentRuntime();\n}\n\nexport const { useAttachment } = createContextStoreHook(\n  useAttachmentContext,\n  \"useAttachment\",\n);\n\nexport const { useAttachment: useThreadComposerAttachment } =\n  createContextStoreHook(useThreadComposerAttachmentContext, \"useAttachment\");\n\nexport const { useAttachment: useEditComposerAttachment } =\n  createContextStoreHook(useEditComposerAttachmentContext, \"useAttachment\");\n\nexport const { useAttachment: useMessageAttachment } = createContextStoreHook(\n  useMessageAttachmentContext,\n  \"useAttachment\",\n);\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA,mBAA0C;AAE1C,oCAAuC;AA0ChC,IAAM,wBAAoB;AAAA,EAC/B;AACF;AAQO,SAAS,qBAAqB,SAElC;AACD,QAAM,cAAU,yBAAW,iBAAiB;AAC5C,MAAI,CAAC,SAAS,YAAY,CAAC;AACzB,UAAM,IAAI;AAAA,MACR;AAAA,IACF;AAEF,SAAO;AACT;AAQA,SAAS,mCAAmC,SAEI;AAC9C,QAAM,UAAU,qBAAqB,OAAO;AAC5C,MAAI,CAAC,QAAS,QAAO;AACrB,MAAI,QAAQ,WAAW;AACrB,UAAM,IAAI;AAAA,MACR;AAAA,IACF;AACF,SAAO;AACT;AAQA,SAAS,iCAAiC,SAEI;AAC5C,QAAM,UAAU,qBAAqB,OAAO;AAC5C,MAAI,CAAC,QAAS,QAAO;AACrB,MAAI,QAAQ,WAAW;AACrB,UAAM,IAAI;AAAA,MACR;AAAA,IACF;AACF,SAAO;AACT;AAQA,SAAS,4BAA4B,SAEI;AACvC,QAAM,UAAU,qBAAqB,OAAO;AAC5C,MAAI,CAAC,QAAS,QAAO;AACrB,MAAI,QAAQ,WAAW;AACrB,UAAM,IAAI;AAAA,MACR;AAAA,IACF;AACF,SAAO;AACT;AAQO,SAAS,qBAAqB,SAER;AAC3B,QAAM,oBAAoB,qBAAqB,OAAO;AACtD,MAAI,CAAC,kBAAmB,QAAO;AAC/B,SAAO,kBAAkB,qBAAqB;AAChD;AAQO,SAAS,mCAAmC,SAEtB;AAC3B,QAAM,oBAAoB,mCAAmC,OAAO;AACpE,MAAI,CAAC,kBAAmB,QAAO;AAC/B,SAAO,kBAAkB,qBAAqB;AAChD;AAQO,SAAS,iCAAiC,SAEpB;AAC3B,QAAM,oBAAoB,iCAAiC,OAAO;AAClE,MAAI,CAAC,kBAAmB,QAAO;AAC/B,SAAO,kBAAkB,qBAAqB;AAChD;AAQO,SAAS,4BAA4B,SAEf;AAC3B,QAAM,oBAAoB,4BAA4B,OAAO;AAC7D,MAAI,CAAC,kBAAmB,QAAO;AAC/B,SAAO,kBAAkB,qBAAqB;AAChD;AAEO,IAAM,EAAE,cAAc,QAAI;AAAA,EAC/B;AAAA,EACA;AACF;AAEO,IAAM,EAAE,eAAe,4BAA4B,QACxD,sDAAuB,oCAAoC,eAAe;AAErE,IAAM,EAAE,eAAe,0BAA0B,QACtD,sDAAuB,kCAAkC,eAAe;AAEnE,IAAM,EAAE,eAAe,qBAAqB,QAAI;AAAA,EACrD;AAAA,EACA;AACF;","names":[]}