{"version":3,"sources":["../../src/ui/markdown-text.tsx"],"sourcesContent":["import { FC, memo } from \"react\";\nimport { CodeHeader } from \"./code-header\";\nimport classNames from \"classnames\";\nimport {\n  MarkdownTextPrimitive,\n  MarkdownTextPrimitiveProps,\n} from \"../primitives/MarkdownText\";\nimport { INTERNAL } from \"@assistant-ui/react\";\nimport { useIsMarkdownCodeBlock } from \"../overrides/PreOverride\";\n\nconst { withSmoothContextProvider, useSmoothStatus } = INTERNAL;\n\nexport type MakeMarkdownTextProps = MarkdownTextPrimitiveProps;\n\nconst defaultComponents: MakeMarkdownTextProps[\"components\"] = {\n  h1: ({ node, className, ...props }) => (\n    <h1 className={classNames(\"aui-md-h1\", className)} {...props} />\n  ),\n  h2: ({ node, className, ...props }) => (\n    <h2 className={classNames(\"aui-md-h2\", className)} {...props} />\n  ),\n  h3: ({ node, className, ...props }) => (\n    <h3 className={classNames(\"aui-md-h3\", className)} {...props} />\n  ),\n  h4: ({ node, className, ...props }) => (\n    <h4 className={classNames(\"aui-md-h4\", className)} {...props} />\n  ),\n  h5: ({ node, className, ...props }) => (\n    <h5 className={classNames(\"aui-md-h5\", className)} {...props} />\n  ),\n  h6: ({ node, className, ...props }) => (\n    <h6 className={classNames(\"aui-md-h6\", className)} {...props} />\n  ),\n  p: ({ node, className, ...props }) => (\n    <p className={classNames(\"aui-md-p\", className)} {...props} />\n  ),\n  a: ({ node, className, ...props }) => (\n    <a className={classNames(\"aui-md-a\", className)} {...props} />\n  ),\n  blockquote: ({ node, className, ...props }) => (\n    <blockquote\n      className={classNames(\"aui-md-blockquote\", className)}\n      {...props}\n    />\n  ),\n  ul: ({ node, className, ...props }) => (\n    <ul className={classNames(\"aui-md-ul\", className)} {...props} />\n  ),\n  ol: ({ node, className, ...props }) => (\n    <ol className={classNames(\"aui-md-ol\", className)} {...props} />\n  ),\n  hr: ({ node, className, ...props }) => (\n    <hr className={classNames(\"aui-md-hr\", className)} {...props} />\n  ),\n  table: ({ node, className, ...props }) => (\n    <table className={classNames(\"aui-md-table\", className)} {...props} />\n  ),\n  th: ({ node, className, ...props }) => (\n    <th className={classNames(\"aui-md-th\", className)} {...props} />\n  ),\n  td: ({ node, className, ...props }) => (\n    <td className={classNames(\"aui-md-td\", className)} {...props} />\n  ),\n  tr: ({ node, className, ...props }) => (\n    <tr className={classNames(\"aui-md-tr\", className)} {...props} />\n  ),\n  sup: ({ node, className, ...props }) => (\n    <sup className={classNames(\"aui-md-sup\", className)} {...props} />\n  ),\n  pre: ({ node, className, ...props }) => (\n    <pre className={classNames(\"aui-md-pre\", className)} {...props} />\n  ),\n  code: ({ node, className, ...props }) => {\n    const isCodeBlock = useIsMarkdownCodeBlock();\n    return (\n      <code\n        className={classNames(!isCodeBlock && \"aui-md-inline-code\", className)}\n        {...props}\n      />\n    );\n  },\n  CodeHeader,\n};\n\nexport const makeMarkdownText = ({\n  className,\n  components: userComponents,\n  ...rest\n}: MakeMarkdownTextProps = {}) => {\n  const components = {\n    ...defaultComponents,\n    ...Object.fromEntries(\n      // ignore undefined values, so undefined values do not override default components\n      Object.entries(userComponents ?? {}).filter(([_, v]) => v !== undefined),\n    ),\n  };\n\n  const MarkdownTextImpl: FC = () => {\n    const status = useSmoothStatus();\n    return (\n      <MarkdownTextPrimitive\n        components={components}\n        {...rest}\n        className={classNames(\n          status.type === \"running\" && \"aui-md-running\",\n          className,\n        )}\n      />\n    );\n  };\n  MarkdownTextImpl.displayName = \"MarkdownText\";\n\n  return memo(withSmoothContextProvider(MarkdownTextImpl), () => true);\n};\n"],"mappings":"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","names":[]}